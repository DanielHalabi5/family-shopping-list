
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}
        

model User {
  id        String   @id @default(cuid())
  name      String
  email     String   @unique
  password  String
  familyId  String
  family    Family   @relation(fields: [familyId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Family {
  id            String         @id @default(cuid())
  name          String
  members       User[]
  shoppingLists ShoppingList[]
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
}

model ShoppingList {
  id         String         @id @default(cuid())
  title      String          @default("Weekly Shopping List")
  startDate  DateTime       
  dueDate    DateTime       
  archived   Boolean          @default(false)
  familyId   String
  family     Family          @relation(fields: [familyId], references: [id])
  items      ShoppingItem[]
  createdAt  DateTime        @default(now())
  updatedAt  DateTime        @updatedAt
}

model ShoppingItem {
  id             String         @id @default(cuid())
  name           String
  description    String?
  status         ItemStatus      @default(INCLUDED)
  shoppingListId String
  shoppingList   ShoppingList    @relation(fields: [shoppingListId], references: [id])
  createdAt      DateTime        @default(now())
  updatedAt      DateTime        @updatedAt
}

enum ItemStatus {
  INCLUDED
  SKIPPED
}